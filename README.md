# granite-tools

Character-based ngram analysis tool for keyboard layout optimization. Uses the same ngram format as input as the [Keyboard Layout Optimizer](https://github.com/dariogoetz/keyboard_layout_optimizer) by Dario Gรถtz.

# Installing

```
python -m pip install git+https://github.com/fohrloop/granite-tools.git
```

# Commands

## `ngram_show`

Show ngram files. Example:

```
โฏ ngram_show ./ngrams/kla-english -s 2 --plot -n 10
โโโโโโโโโโโโโโโโโโ kla-english โโโโโโโโโโโโโโโโโโโ
   1: eโฃ โโโโโโโโโโโโโโโโโโโโโโ 2.88
   2: โฃt โโโโโโโโโโโโโโโโโโ 2.31
   3: th โโโโโโโโโโโโโโโ 1.98
   4: he โโโโโโโโโโโโโโ 1.88
   5: sโฃ โโโโโโโโโโโโโ 1.75
   6: โฃa โโโโโโโโโโโโโ 1.73
   7: dโฃ โโโโโโโโโโโโ 1.52
   8: in โโโโโโโโโโโ 1.46
   9: tโฃ โโโโโโโโโโ 1.32
  10: er โโโโโโโโโโ 1.28
```

Full help, see:

 ```
โฏ ngram_show --help
```

### Data requirements for `ngram_show`

Assumes that the ngram files follow the same format as the [Keyboard Layout Optimizer](https://github.com/dariogoetz/keyboard_layout_optimizer); `<frequency> <chars>` on each line. For example:

```
7.851906052482727  
7.534280931977296 e
5.621867629166546 t
4.477877757676168 r
4.430916637427879 a
```

and that each set of ngrams are called `1-grams.txt`, `2-grams.txt` and `3-grams.txt` within a single folder, like this:

```
๐ ngrams/
โโ๐ leipzig/
| โโ๐ 1-grams.txt
| โโ๐ 2-grams.txt
| โโ๐ 3-grams.txt
โโ๐ tldr17/
  โโ๐ 1-grams.txt
  โโ๐ 2-grams.txt
  โโ๐ 3-grams.txt
```

## `ngram_compare`

Compare two ngram corpora. Example:

```
โฏ ngram_compare /home/fohrloop/code/granite-english-ngrams/ngrams/english/ /home/fohrloop/code/granite-code-ngrams/ngrams/code/  --plot -s 3 -n 20  -
i --diff -w
โโโโโโโโโโโโโโโโโโโโโenglishโโโโโโโโโโโโโโโโโโโโโโ โโโโโโโโโโโโโโโโโโโโโโโcodeโโโโโโโโโโโโโโโโโโโโโโโ
 1: the   โโโโโโโโโโโโโโโโโโโโ 2.49                    1 (+2826): --- โโโโโโโโโโโโโโโโโโโโ 0.61
 2: ing   โโโโโโโโโโโ 1.43                             2 (   +4): ion โโโโโโโโโโโโโโโ 0.47
 3: and   โโโโโโโโโโ 1.26                              3 (   +6): ent โโโโโโโโโโโโโโ 0.42
 4: hat   โโโโโ 0.61                                   4 (  +33): con โโโโโโโโโโโโโ 0.41
 5: her   โโโโโ 0.60                                   5 (   +7): tio โโโโโโโโโโโโโ 0.39
 6: ion   โโโโโ 0.56                                   6 (   -5): the โโโโโโโโโโ 0.31
 7: tha   โโโโ 0.55                                    7 (   -5): ing โโโโโโโโโโ 0.30
 8: for   โโโโ 0.55                                    8 (  +17): ate โโโโโโโโโโ 0.30
 9: ent   โโโโ 0.53                                    9 ( +275): sel โโโโโโโโโโ 0.29
10: thi   โโโโ 0.50                                   10 ( +194): ass โโโโโโโโโ 0.27
11: all   โโโโ 0.47                                   11 (  +68): ect โโโโโโโโโ 0.26
12: tio   โโโโ 0.45                                   12 (  +37): ons โโโโโโโโ 0.25
13: ver   โโโ 0.42                                    13 (  +88): ort โโโโโโโโ 0.25
14: you   โโโ 0.42                                    14 ( +240): ser โโโโโโโโ 0.25
15: ter   โโโ 0.40                                    15 ( +456): elf โโโโโโโโ 0.24
16: ere   โโโ 0.38                                    16 ( +890): def โโโโโโโโ 0.24
17: his   โโโ 0.38                                    17 (  +64): ame โโโโโโโโ 0.23
18: ith   โโโ 0.36                                    18 ( +214): por โโโโโโโโ 0.23
19: wit   โโโ 0.35                                    19 (   -4): ter โโโโโโโ 0.23
20: was   โโโ 0.33                                    20 (  +30): est โโโโโโโ 0.22
25: ate   โโโ 0.32                                    22 (  -14): for โโโโโโโ 0.22
37: con   โโ 0.25                                     60 (  -47): ver โโโโโ 0.16
49: ons   โโ 0.22                                     71 (  -68): and โโโโ 0.13
50: est   โโ 0.22                                     95 (  -84): all โโโโ 0.11
79: ect   โ 0.17                                     111 ( -101): thi โโโ 0.10
81: ame   โ 0.16                                     127 ( -110): his โโโ 0.10
101: ort  โ 0.15                                     141 ( -136): her โโโ 0.09
204: ass  โ 0.10                                     145 ( -127): ith โโโ 0.09
232: por  โ 0.09                                     155 ( -136): wit โโโ 0.09
254: ser  โ 0.08                                     189 ( -173): ere โโ 0.07
284: sel  โ 0.08                                     505 ( -498): tha โ 0.04
471: elf   0.05                                      603 ( -599): hat โ 0.03
906: def   0.03                                     1022 (-1008): you โ 0.02
2827: ---  0.00                                     3196 (-3176): was  0.01
```

Full help, see:

```
โฏ ngram_compare --help
```

### Data requirements for `ngram_compare`

See: [Data requirements for `ngram_show`](#data-requirements-for-ngram_show)